---
title: "Custom charts"
description: "Custom charts are available in Beta for those that want additional customization and an extended library of charts.  The charts are powered by [vega-lite](https://vega.github.io/vega-lite/examples/) - the link will take you to some example galleries of what you can build using this powerful charting library.  This includes heat maps, bubble plots, box plots and more."
icon: "code"
---

<Info>
  **Custom visualizations are a Beta feature.**

  This means we have limited documentation and support. We may also change the way these options work in the future.
</Info>


### Known limitations

These new Vega-lite powered charts offer enhanced flexibility and a broader range of visualizations, but there are important limitations to be aware of, particularly concerning interactivity and dashboard integration like:

- **Drill-Down Functionality**: The ability to drill into metrics by grouping them with dimensions (e.g., "Drill by") is not available in Custom Charts.
- **View Underlying Data**: Users cannot click on data points within Custom Charts to view the underlying records that compose those data points.
- **Cross-Filtering**: Interactive filtering across dashboard tiles by selecting elements within a chart (also known as cross-filtering) is not supported in Custom Charts.


## Quickstart

The steps to create a custom chart are as follows:

<Steps>
  <Step title="Gather your data">
    Return the data you need for your chart as normal using the Lightdash UI to select relevant dimensions and metrics.
  </Step>
  <Step title="Switch to custom chart">
    Head to the chart configuration options, in the drop down, you should see an option for custom charts as long as it has been enabled.
    ![](/images/references/custom-charts-drop-down.png)
  </Step>
  <Step title="Write your config">
    Select a template to load a sample configuration for the chart selected, or grab an example.
    <Tip> **Tip:** LLMs are great at updating Vega Lite configs </Tip>
  </Step>
</Steps>

Below are some example chart config templates that we got working in Lightdash, along with some tips on when to use each chart type.


## Vega templates


### Bar chart

You can already do this with presets in Lightdash, but it's a simple example you should be able to get working quickly. This chart works best with simple string or date dimensions and a numeric metric


<Accordion title="Here is an example config with tooltips and a pivot">
```json
{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "mark": "bar",
  "encoding": {
    "x": {
      "field": "orders_order_date_week",
      "type": "temporal" // use quantitative if dimension if string or number
    },
    "y": {
      "field": "orders_total_order_amount",
      "type": "quantitative"
    },
    "color": { // Optional property to pivot the data
      "field": "orders_status",
      "type": "nominal"
    },
    "tooltip": [ // Optional property to show tooltips
      {"field": "orders_order_date_week", "type": "temporal", "title": "Order Date Week"},
      {"field": "orders_total_order_amount", "type": "quantitative", "title": "Total Order Amount"},
      {"field": "orders_status", "type": "nominal", "title": "Status"}
    ]
  }
}
```
</Accordion>


#### Sankey-style bar chart

Use this chart when you want to show how parts of a whole change across categories or time and you want to visualize how individual segments flow from one stage to the next.

It's perfect for things like user cohorts, funnel stages, or survey responses over time. Any scenario where it's helpful to track how groups move or shift between steps.

[See a live demo of this chart](https://demo.lightdash.com/projects/d496d901-a76d-4916-9eae-b81bc7337013/saved/8db9bfd8-7e2d-41a0-8f7e-7a727660fb20) on our demo site.

The config below will output a sankey-style bar chart with the standard Vega-Lite settings, like this:

![](/images/references/sankey-style-bar-chart.png)

<Accordion title="Example sankey-style 100% stacked bar chart config">

```json
{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "config": {
    "axis": {
      "titleFontSize": 16,
      "labelFontSize": 14,
      "grid": false
    }
  },
  "layer": [
    {
      "mark": {
        "type": "area",
        "interpolate": "monotone"
      },
      "encoding": {
        "opacity": { "value": 0.4 },
        "x": {
          "field": "leads_created_at_month",
          "type": "temporal",
          "title": null,
          "axis": {
            "labelExpr": "timeFormat(datum.value, '%b %Y')",
            "grid": false
          }
        },
        "y": {
          "aggregate": "sum",
          "field": "_of_total",
          "type": "quantitative",
          "stack": "zero",
          "title": "% of Monthly Leads",
          "axis": {
            "labels": false,
            "grid": false,
            "format": ".0%"
          }
        },
        "color": {
          "field": "leads_lead_status",
          "type": "nominal",
          "title": "Lead status",
          "sort": {
            "op": "sum",
            "field": "_of_total",
            "order": "descending"
          },
          "scale": {
            "scheme": "dark2"
          }
        },
        "detail": {
          "field": "leads_lead_status",
          "type": "nominal"
        },
        "tooltip": [
          {
            "field": "leads_created_at_month",
            "type": "temporal",
            "title": "Month"
          },
          {
            "field": "leads_lead_status",
            "type": "nominal",
            "title": "Lead status"
          },
          {
            "aggregate": "sum",
            "field": "_of_total",
            "type": "quantitative",
            "title": "% of month",
            "format": "0%"
          }
        ],
        "order": {
          "aggregate": "sum",
          "field": "_of_total",
          "sort": "descending"
        }
      }
    },
    {
      "mark": {
        "type": "bar",
        "width": { "band": 1 }
      },
      "encoding": {
        "x": {
          "field": "leads_created_at_month",
          "type": "temporal",
          "axis": {
            "labelExpr": "timeFormat(datum.value, '%b %Y')",
            "grid": false
          }
        },
        "y": {
          "aggregate": "sum",
          "field": "_of_total",
          "type": "quantitative",
          "stack": "zero",
          "title": "% of Monthly Leads",
          "axis": {
            "grid": false,
            "format": ".0%"
          }
        },
        "color": {
          "field": "leads_lead_status",
          "type": "nominal",
          "title": "Lead status",
          "sort": {
            "op": "sum",
            "field": "_of_total",
            "order": "descending"
          },
          "legend": {
            "titleFontSize": 16,
            "labelFontSize": 14,
            "symbolSize": 300,
            "orient": "right",
            "direction": "vertical"
          },
          "scale": {
            "scheme": "dark2"
          }
        },
        "order": {
          "aggregate": "sum",
          "field": "_of_total",
          "sort": "descending"
        },
        "tooltip": [
          {
            "field": "leads_created_at_month",
            "type": "temporal",
            "title": "Month"
          },
          {
            "field": "leads_lead_status",
            "type": "nominal",
            "title": "Lead status"
          },
          {
            "aggregate": "sum",
            "field": "_of_total",
            "type": "quantitative",
            "title": "% of month",
            "format": ".1%"
          }
        ]
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "center",
        "baseline": "line-top",
        "dx": 0,
        "fill": "black",
        "fontSize": 12
      },
      "encoding": {
        "x": {
          "field": "leads_created_at_month",
          "type": "temporal"
        },
        "y": {
          "aggregate": "sum",
          "field": "_of_total",
          "type": "quantitative",
          "stack": "center"
        },
        "detail": {
          "field": "leads_lead_status",
          "type": "nominal"
        },
        "text": {
          "aggregate": "sum",
          "field": "_of_total",
          "type": "quantitative",
          "format": ".1%"
        },
        "order": {
          "aggregate": "sum",
          "field": "_of_total",
          "sort": "descending"
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "center",
        "baseline": "middle"
      },
      "encoding": {
        "x": {
          "field": "leads_created_at_month",
          "type": "temporal"
        },
        "y": {
          "value": 1
        }
      }
    }
  ]
}

```
</Accordion>


### Line chart with confidence interval

This chart works best with a date dimension on the x-axis and a numeric metric as the "Mean" with "Mean High" and "Mean Low" numeric values in your results.

[See a live demo of this chart](https://demo.lightdash.com/projects/2014e038-ff4b-4761-ae6f-fbf551e7b468/saved/f586131d-3ff2-4d86-95e9-eae6b14fbc42) on our demo site.

The config below will output a line chart with confidence interval bands that looks like this:

![](/images/references/custom-chart-confidence-interval.png)

<Accordion title="Example line chart with confidence interval config">

```json
{
  "layer": [
    {
      "mark": {
        "type": "errorband"
      },
      "encoding": {
        "y": {
          "type": "quantitative",
          "field": "profit_low"
        },
        "y2": {
          "type": "quantitative",
          "field": "profit_high"
        },
        "color": {
          "value": "#7c43bd"
        },
        "opacity": {
          "value": 0.25
        }
      }
    },
    {
      "mark": {
        "type": "line"
      },
      "encoding": {
        "y": {
          "axis": {
            "format": "$,.0f"
          },
          "type": "quantitative",
          "field": "dbt_orders_sum_of_profit",
          "title": "Profit"
        },
        "color": {
          "value": "#7c43bd"
        }
      }
    }
  ],
  "title": "Monthly profit with confidence intervals",
  "width": "container",
  "config": {
    "axis": {
      "grid": true
    },
    "view": {
      "stroke": null
    }
  },
  "height": 300,
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "encoding": {
    "x": {
      "type": "temporal",
      "field": "dbt_orders_order_date_month",
      "title": "Month",
      "timeUnit": "yearmonth"
    },
    "tooltip": [
      {
        "type": "temporal",
        "field": "dbt_orders_order_date_month",
        "title": "Month",
        "timeUnit": "yearmonth"
      },
      {
        "type": "quantitative",
        "field": "dbt_orders_sum_of_profit",
        "title": "Profit (Mean)",
        "format": "$,.0f"
      },
      {
        "type": "quantitative",
        "field": "profit_low",
        "title": "Profit (Low)",
        "format": "$,.0f"
      },
      {
        "type": "quantitative",
        "field": "profit_high",
        "title": "Profit (High)",
        "format": "$,.0f"
      }
    ]
  }
}
```
</Accordion>


### Heatmaps

Heatmaps are ideal for visualizing patterns across two categorical or temporal dimensions, making it easy to spot trends, hotspots, or anomalies at a glance. They're perfect for analyzing time-based patterns (like day of week vs. hour of day), comparing performance across categories, or identifying correlations in multi-dimensional data.

This chart works best with string or date dimensions and a numeric metric as color.

[See a live demo of this chart](https://demo.lightdash.com/projects/2014e038-ff4b-4761-ae6f-fbf551e7b468/saved/86a8e5d3-75e9-49ec-b65a-b3c6a4730217) on our demo site.

In this example, the heatmap uses orders data to show patterns across order weeks (x-axis) and days of the week (y-axis), with color intensity representing the number of orders. The config below will output a heatmap with the standard Vega-Lite settings that looks like this:

![](/images/references/custom-charts-heatmap.png)

<Accordion title="Example heatmap config">

```json
{
  "mark": "rect",
  "encoding": {
    "x": {
      "field": "dbt_orders_order_date_week",
      "type": "temporal",
      "title": "Week",
      "timeUnit": "yearweek"
    },
    "y": {
      "field": "dbt_orders_order_date_day_of_week_name",
      "type": "ordinal",
      "title": "Day of Week",
      "sort": [
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
        "Sunday"
      ]
    },
    "color": {
      "aggregate": "sum",
      "field": "dbt_orders_count_distinct_order_id",
      "type": "quantitative",
      "title": "Orders",
      "scale": {
        "scheme": "blues"
      }
    },
    "tooltip": [
      {
        "field": "dbt_orders_order_date_week",
        "type": "temporal",
        "title": "Week"
      },
      {
        "field": "dbt_orders_order_date_day_of_week_name",
        "type": "ordinal",
        "title": "Day of Week"
      },
      {
        "aggregate": "sum",
        "field": "dbt_orders_count_distinct_order_id",
        "type": "quantitative",
        "title": "Orders"
      }
    ]
  }
}
```
</Accordion>


### Bubble Plots

Bubble plots build on top of standard scatter plot visualizations, by allowing you to adjust the size of a given point based on the output of a field. Here's one looking at some Healthcare data.

This chart works best with string or date dimensions and a numeric metric for the y-axis and another numeric metric for the size.

[See a live demo of this chart](https://demo.lightdash.com/projects/7992ac17-dbb3-4c8e-8658-fcbc96eea949/saved/ec504908-e693-4b89-98d2-c06085a2f815) on our demo site.

The config below will output a bubble plot with the standard Vega-Lite settings, like this:

![](/images/references/custom-charts-bubble-plot.png)


<Accordion title="Example Bubble blot config">

```json
{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "layer": [
    {
      "mark": {
        "type": "point",
        "filled": true,
        "opacity": 0.7
      },
      "encoding": {
        "x": {
          "axis": {
            "title": "Total Discharges",
            "tickColor": "#6e7079",
            "labelColor": "#6e7079"
          },
          "type": "quantitative",
          "field": "inpatient_charges_sum_total_discharges"
        },
        "y": {
          "axis": {
            "title": "Total Charged ($)",
            "tickColor": "#6e7079",
            "labelColor": "#6e7079"
          },
          "type": "quantitative",
          "field": "inpatient_charges_sum_total_charged"
        },
        "size": {
          "type": "quantitative",
          "field": "inpatient_charges_avg_charged_per_discharge",
          "legend": {
            "title": "Avg Charged per Discharge"
          }
        },
        "color": {
          "value": "#7C6AED"
        },
        "tooltip": [
          {
            "type": "nominal",
            "field": "inpatient_charges_provider_state",
            "title": "State"
          },
          {
            "type": "quantitative",
            "field": "inpatient_charges_sum_total_discharges",
            "title": "Total Discharges"
          },
          {
            "type": "quantitative",
            "field": "inpatient_charges_sum_total_charged",
            "title": "Total Charged"
          },
          {
            "type": "quantitative",
            "field": "inpatient_charges_avg_charged_per_discharge",
            "title": "Avg Length of Stay"
          }
        ]
      }
    },
    {
      "mark": {
        "type": "line",
        "color": "#89bea4",
        "strokeWidth": 2
      },
      "encoding": {
        "x": {
          "type": "quantitative",
          "field": "inpatient_charges_sum_total_discharges"
        },
        "y": {
          "type": "quantitative",
          "field": "inpatient_charges_sum_total_charged"
        }
      },
      "transform": [
        {
          "on": "inpatient_charges_sum_total_discharges",
          "regression": "inpatient_charges_sum_total_charged"
        }
      ]
    }
  ]
}
```

</Accordion>


### Funnel charts

Funnel charts are ideal for visualizing a flow or process where the quantity decreases step-by-step, such as sales pipelines, conversion rates, or order processes. Each stage is represented as a bar whose width reflects the corresponding value.

This chart works best with a categorical or string dimension (like status or step name) and a numeric metric (such as order amount or count) to measure at each step.

Funnel chart configurations are more complex than other charts. We recommend loading the template directly in Lightdash, which will automatically map your data fields.

[See a live demo of this chart](https://demo.lightdash.com/projects/d496d901-a76d-4916-9eae-b81bc7337013/saved/b19b6a9f-b7a7-4795-bbd7-48f39b425c69) on our demo site.

The config below will output a funnel chart with the standard Vega-Lite settings that looks like this:

![Custom funnel chart](/images/references/custom-charts-funnel-chart.png)

<Accordion title="Example funnel chart config">

```json
{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",

  "title": {
    "text": "Sales Funnel",
    "anchor": "middle",
    "fontSize": 18,
    "fontWeight": "bold"
  },

  "config": {
    "view": {
      "strokeWidth": 0
    }
  },

  "transform": [
    {
      "joinaggregate": [
        {
          "as": "max_count",
          "op": "max",
          "field": "leads_unique_lead_count"
        }
      ]
    },
    {
      "as": "x_start",
      "calculate": "(datum.max_count - datum.leads_unique_lead_count) / 2"
    },
    {
      "as": "x_end",
      "calculate": "datum.x_start + datum.leads_unique_lead_count"
    },
    {
      "as": "x_mid",
      "calculate": "datum.x_start + (datum.leads_unique_lead_count / 2)"
    },
    {
      "as": "label",
      "calculate": "datum.leads_unique_lead_count + ' ' + datum.leads_lead_status"
    },
    {
      "as": "change_label",
      "calculate": "isValid(datum.conversion_rate) ? 'â†“ ' + format(datum.conversion_rate * 100, '.1f') + '%' : ''"
    }
  ],

  "layer": [
    {
      "mark": {
        "type": "bar"
      },
      "encoding": {
        "x": {
          "axis": null,
          "type": "quantitative",
          "field": "x_start"
        },
        "x2": {
          "field": "x_end"
        },
        "y": {
          "axis": null,
          "sort": null,
          "type": "nominal",
          "field": "leads_lead_status",
          "scale": {
            "padding": 0.5,
            "reverse": true
          }
        },
        "color": {
          "type": "nominal",
          "field": "leads_lead_status",
          "scale": {
            "range": [
              "#FFE3CC",
              "#FFC199",
              "#FF9F66",
              "#FF7D33",
              "#E65C00",
              "#B34700"
            ]
          }
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "center",
        "color": "black",
        "baseline": "middle",
        "fontWeight": "bold"
      },
      "encoding": {
        "x": {
          "type": "quantitative",
          "field": "x_mid"
        },
        "y": {
          "axis": null,
          "sort": null,
          "type": "nominal",
          "field": "leads_lead_status",
          "scale": {
            "reverse": true
          }
        },
        "text": {
          "field": "label"
        },
        "yOffset": {
          "value": -8
        }
      }
    },
    {
      "mark": {
        "type": "text",
        "align": "center",
        "color": "black",
        "baseline": "middle",
        "fontSize": 12
      },
      "encoding": {
        "x": {
          "type": "quantitative",
          "field": "x_mid"
        },
        "y": {
          "axis": null,
          "sort": null,
          "type": "nominal",
          "field": "leads_lead_status",
          "scale": {
            "reverse": true
          }
        },
        "text": {
          "field": "change_label"
        },
        "yOffset": {
          "value": 10
        }
      }
    },
    {
      "mark": {
        "type": "point",
        "opacity": 0
      },
      "encoding": {
        "color": {
          "type": "nominal",
          "field": "leads_lead_status",
          "scale": {
            "range": [
              "#FFE3CC",
              "#FFC199",
              "#FF9F66",
              "#FF7D33",
              "#E65C00",
              "#B34700"
            ]
          },
          "legend": {
            "title": "Lead status",
            "orient": "right"
          }
        }
      }
    }
  ]
}

```

</Accordion>

<Tip>
  If you add extra dimensions, the funnel chart will not render correctly.
</Tip>


### Waterfall charts

Waterfall charts show how an initial value is affected by a series of positive and negative changes, making it easy to see the cumulative effect of sequential increases and decreases. They're perfect for visualizing financial changes (revenue breakdown, budget analysis), customer lifecycle metrics, or any scenario where you need to track step-by-step contributions to a total.

This chart works best with a categorical or temporal dimension for the x-axis (like stages or time periods) and numeric metrics representing starting and ending values for each step.

[See a live demo of this chart](https://demo.lightdash.com/projects/d496d901-a76d-4916-9eae-b81bc7337013/saved/3706f242-e4c5-4bb7-9037-e750e18a06e4/) on our demo site.

The config below will output a waterfall chart with the standard Vega-Lite settings, like this:

![Custom Waterfall](/images/references/custom-charts-waterfall.png)


<Accordion title="Example waterfall config">

```json
{
  "data": {
    "name": "table"
  },
  "layer": [
    {
      "mark": {
        "type": "bar",
        "opacity": 1
      },
      "encoding": {
        "y": {
          "type": "quantitative",
          "field": "base",
          "title": "Unique Active Users"
        },
        "y2": {
          "field": "end"
        },
        "color": {
          "type": "nominal",
          "field": "type",
          "scale": {
            "range": [
              "#BFAAF9",
              "#F28B82",
              "#E5E7EB"
            ],
            "domain": [
              "increase",
              "decrease",
              "no_change"
            ]
          },
          "legend": {
            "title": "Change Type"
          }
        },
        "tooltip": [
          {
            "field": "tracks_timestamp_day",
            "title": "Date",
            "timeUnit": "yearmonthdate"
          },
          {
            "field": "tracks_unique_user_count",
            "title": "Total Users"
          },
          {
            "field": "change",
            "title": "Change"
          }
        ]
      }
    },
    {
      "mark": {
        "dx": 50,
        "dy": 10,
        "type": "text",
        "align": "left",
        "color": "#333",
        "baseline": "middle",
        "fontWeight": "bold"
      },
      "encoding": {
        "x": {
          "type": "temporal",
          "field": "tracks_timestamp_day"
        },
        "y": {
          "type": "quantitative",
          "field": "end"
        },
        "text": {
          "type": "quantitative",
          "field": "change",
          "format": "+,d"
        }
      }
    }
  ],
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "encoding": {
    "x": {
      "axis": {
        "grid": false,
        "format": "%b %d",
        "tickCount": "day",
        "labelAngle": -45
      },
      "type": "temporal",
      "field": "tracks_timestamp_day",
      "title": "Date",
      "timeUnit": "yearmonthdate"
    }
  },
  "transform": [
    {
      "sort": [
        {
          "field": "tracks_timestamp_day"
        }
      ],
      "window": [
        {
          "as": "previous_value",
          "op": "lag",
          "field": "tracks_unique_user_count"
        }
      ]
    },
    {
      "as": "change",
      "calculate": "datum.tracks_unique_user_count - datum.previous_value"
    },
    {
      "as": "type",
      "calculate": "datum.change > 0 ? 'increase' : datum.change < 0 ? 'decrease' : 'no_change'"
    },
    {
      "as": "base",
      "calculate": "datum.previous_value || 0"
    },
    {
      "as": "end",
      "calculate": "datum.base + datum.change"
    }
  ],
  "description": "Waterfall chart showing changes in active unique users per day."
}
```

</Accordion>


### Map charts

Map charts are perfect for visualizing data with geographic dimensions, making it easy to spot regional patterns, hotspots, and distributions at a glance. They're ideal for analyzing customer locations, sales territories, demographic trends, or any scenario where location-based insights matter.

This chart works best with latitude and longitude coordinates (or geographic identifiers) and a numeric metric for sizing or coloring data points.


#### World map country bubbles

In this example, the base world map is drawn using a TopoJSON file of countries, and data points are plotted as circles, with their size based on the total order amount.

The config below will output a map chart with the standard Vega-Lite settings, like this:

![Custom Map Chart](/images/references/custom-map-chart.png)

<Accordion title="Example world map config">

```json
{
  "projection": {
    "type": "mercator",
    "scale": 100, // Change scale to zoom into the map
    "center": [
      10,
      50
    ]
  },
  "layer": [
    {
      "data": {
        "url": "/vega-world-map.json", // Lightdash default world map
        "format": {
          "type": "topojson",
          "feature": "countries"
        }
      },
      "mark": {
        "fill": "lightgray",
        "type": "geoshape",
        "stroke": "white"
      }
    },
    {
      "mark": "circle",
      "encoding": {
        "size": {
          "type": "quantitative",
          "field": "orders_total_order_amount",
          "legend": {
            "title": "Total Order Amount"
          }
        },
        "color": {
          "field": "orders_status",
          "type": "nominal",
          "legend": {
            "title": "Order Status"
          }
        },
        "tooltip": [
          {
            "type": "ordinal",
            "field": "orders_status",
            "title": "Status"
          },
          {
            "type": "quantitative",
            "field": "orders_total_order_amount",
            "title": "Total Order Amount"
          }         
        ],
        "latitude": {
          "type": "quantitative",
          "field": "latitude"
        },
        "longitude": {
          "type": "quantitative",
          "field": "longitude"
        }
      }
    }
  ]
}
```

</Accordion>


#### USA counties choropleth

To load additional maps, you can specify a full URL on the data layer, and adjust the projection if needed, for example, below is the code for a county-level map of the United States.

The config below will output a map chart like this:

![Custom map USA](/images/references/custom-map-usa.png)

<Accordion title="Example USA map config">

```json
{
  "layer": [
    {
      "data": {
        "url": "https://vega.github.io/vega-lite/data/us-10m.json",
        "format": {
          "type": "topojson",
          "feature": "counties"
        }
      },
      "mark": {
        "fill": "lightgray",
        "type": "geoshape",
        "stroke": "white"
      }
    },
    {
      "mark": {
        "type": "geoshape"
      },
      "encoding": {
        "color": {
          "type": "quantitative",
          "field": "no_h_s_diploma_1",
          "format": ".0%",
          "legend": {
            "title": "No high school diploma",
            "format": ".0%"
          }
        },
        "shape": {
          "type": "geojson",
          "field": "geometry"
        },
        "tooltip": [
          {
            "type": "nominal",
            "field": "education_by_county_area",
            "title": "Area"
          },
          {
            "type": "nominal",
            "field": "education_by_county_state",
            "title": "State"
          },
          {
            "type": "quantitative",
            "field": "no_h_s_diploma_1",
            "title": "No high school diploma",
            "format": ".1%"
          }
        ]
      },
      "transform": [
        {
          "as": [
            "county_id",
            "geometry"
          ],
          "from": {
            "key": "id",
            "data": {
              "url": "https://vega.github.io/vega-lite/data/us-10m.json",
              "format": {
                "type": "topojson",
                "feature": "counties"
              }
            },
            "fields": [
              "id",
              "geometry"
            ]
          },
          "lookup": "education_by_county_fips_code"
        }
      ]
    }
  ],
  "projection": {
    "type": "albersUsa"
  }
}
```

</Accordion>


### Trellis area chart

Trellis Area charts (also called small multiples or faceted area charts) are used to compare trends across multiple categories over time, with each category shown in its own mini chart. They're perfect for spotting patterns, outliers, or seasonality within individual segments, like: product lines, user groups, or marketing channels, without crowding everything into a single chart.

Trellis Area charts are especially helpful when you want to emphasize the shape of trends rather than exact values.

The code below will give you a trellis area chart like this:

![Custom trellis area chart](/images/references/trellis-area.png)

<Accordion title="Example trellis area chart config">

```
{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "description": "Distinct order counts by browser and month.",
  "facet": {
    "row": {
      "field": "dbt_orders_browser",
      "type": "nominal",
      "title": "Browser"
    }
  },
  "spec": {
    "width": 600,
    "height": 60,
    "mark": "area",
    "encoding": {
      "x": {
        "field": "dbt_orders_order_date_week",
        "type": "temporal",
        "title": "Order Month",
        "axis": {
          "grid": true
        }
      },
      "y": {
        "field": "dbt_orders_count_distinct_order_id",
        "type": "quantitative",
        "title": "Distinct Orders",
        "axis": {
          "grid": false
        }
      },
      "color": {
        "field": "dbt_orders_browser",
        "type": "nominal",
        "legend": null
      },
      "tooltip": [
        {
          "field": "dbt_orders_browser",
          "type": "nominal",
          "title": "Browser"
        },
        {
          "field": "dbt_orders_order_date_week",
          "type": "temporal",
          "title": "Order Month"
        },
        {
          "field": "dbt_orders_count_distinct_order_id",
          "type": "quantitative",
          "title": "Distinct Orders"
        }
      ]
    }
  },
  "resolve": {
    "scale": {
      "y": "independent"
    }
  }
}
```

</Accordion>


### Highlighted bar chart

Highlighted bar charts compare a single metric across categories, with one bar visually emphasized to call out a specific item of interest, like a key account or product.

This chart works best with a categorical dimension on the x-axis, a numeric metric on the y-axis, and a color condition to highlight the bar you want to focus on.

The code below will give you a highlighted bar chart like this:

![](/images/references/custom-charts-highlighted-bar.png)

<Accordion title="Example highlighted bar chart config">

```json
{
  "mark": {
    "type": "bar"
  },
  "encoding": {
    "x": {
      "axis": {
        "title": "Category",
        "labelAngle": -40
      },
      "sort": "-y",
      "type": "nominal",
      "field": "your_category_field"
    },
    "y": {
      "axis": {
        "format": "~s"
      },
      "type": "quantitative",
      "field": "your_metric_field",
      "title": "Metric Value"
    },
    "color": {
      "value": "#b0b0b0",
      "legend": null,
      "condition": {
        "test": "datum.your_category_field === 'Your Highlighted Category'",
        "value": "#00B4D8"
      }
    },
    "tooltip": [
      {
        "type": "nominal",
        "field": "your_category_field",
        "title": "Category"
      },
      {
        "type": "quantitative",
        "field": "your_metric_field",
        "title": "Metric Value",
        "format": ","
      }
    ]
  }
}
```

</Accordion>


### More examples

You can find more examples on the [Vega lite official website](https://vega.github.io/vega-lite/examples/).