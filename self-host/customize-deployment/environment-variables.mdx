---
title: "Environment variables"
---

This is a reference to all environment variables that can be used to configure a Lightdash deployment.

| Variable                                        | Description                                                                                                                                                                                                | Required?                                                     | Default |
| :----------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------: | :-------: |
| PGHOST                                          | Hostname of postgres server to store Lightdash data                                                                                                                                                        | <Icon icon="square-check" iconType="solid"/>                                                             |         |
| PGPORT                                          | Port of postgres server to store Lightdash data                                                                                                                                                            | <Icon icon="square-check" iconType="solid"/>                                                             |         |
| PGUSER                                          | Username of postgres user to access postgres server to store Lightdash data                                                                                                                                | <Icon icon="square-check" iconType="solid"/>                                                             |         |
| PGPASSWORD                                      | Password for PGUSER                                                                                                                                                                                        | <Icon icon="square-check" iconType="solid"/>                                                             |         |
| PGDATABASE                                      | Database name inside postgres server to store Lightdash data                                                                                                                                               | <Icon icon="square-check" iconType="solid"/>                                                             |         |
| PGCONNECTIONURI                                 | Connection URI for postgres server to store Lightdash data in the format postgresql://user:password@host:port/db?params                                                                                    | This is an alternative to providing the previous PG variables |         |
| LIGHTDASH\_SECRET                               | Secret key used to secure various tokens in Lightdash. This **must** be fixed between deployments. If the secret changes, you won't have access to Lightdash data.                                         | <Icon icon="square-check" iconType="solid"/>                                                             |         |
| SECURE\_COOKIES                                 | Only allows cookies to be stored over a https connection. We use cookies to keep you logged in. This is recommended to be set to true in production.                                                       | false                                                         |         |
| COOKIES\_MAX\_AGE\_HOURS                        | How many hours a user session exists before the user is automatically signed out. For example if 24, then the user will be automatically after 24 hours of inactivity.                                     |                                                               |         |
| TRUST\_PROXY                                    | This tells the Lightdash server that it can trust the X-Forwarded-Proto header it receives in requests. This is useful if you use SECURE\_COOKIES=true behind a HTTPS terminated proxy that you can trust. | false                                                         |         |
| SITE\_URL                                       | Site url where Lightdash is being hosted. It should include the protocol. E.g [https://lightdash.mycompany.com](https://lightdash.mycompany.com)                                                           | http://localhost:8080                                         |         |
| INTERNAL\_LIGHTDASH\_HOST                       | Internal Lightdash host for the Headless browser to send requests when your Lightdash instance is not accessible from the Internet.                                                                        | Same as SITE\_URL                                             |         |
| STATIC\_IP                                      | Server static IP so users can add the IP to their warehouse allow-list.                                                                                                                                    | http://localhost:8080                                         |         |
| LIGHTDASH\_QUERY\_MAX\_LIMIT                    | Query max rows limit                                                                                                                                                                                       | 5000                                                          |         |
| SCHEDULER\_ENABLED                              | Enables/Disables the scheduler worker that triggers the scheduled deliveries.                                                                                                                              | true                                                          |         |
| SCHEDULER\_CONCURRENCY                          | How many scheduled delivery jobs can be processed concurrently.                                                                                                                                            | 3                                                             |         |
| SCHEDULER\_JOB\_TIMEOUT                         | After how many milliseconds the job should be timeout so the scheduler worker can pick other jobs.                                                                                                         | 600000 (10 minutes)                                           |         |
| LIGHTDASH\_CSV\_CELLS\_LIMIT                    | Max cells on CSV file exports                                                                                                                                                                              | 100000                                                        |         |
| LIGHTDASH\_CHART\_VERSION\_HISTORY\_DAYS\_LIMIT | Configure how far back the chart versions history goes in days                                                                                                                                             | 3                                                             |         |
| LIGHTDASH\_PIVOT\_TABLE\_MAX\_COLUMN\_LIMIT     | Configure maximum number of columns in pivot table                                                                                                                                                         | 60                                                            |         |
| GROUPS\_ENABLED                                 | Enables/Disables groups functionality                                                                                                                                                                      | false                                                         |         |
| AUTH\_ENABLE\_OIDC\_LINKING                     | Enables/Disables linking the new OIDC(aka SSO) identity to an existing user if they already have another OIDC with the same email                                                                          | false                                                         |         |

Lightdash also accepts all [standard postgres environment variables](https://www.postgresql.org/docs/9.3/libpq-envars.html)

## SMTP environment variables

This is a reference to all the SMTP environment variables that can be used to configure a Lightdash email client.

| Variable                          | Description                                                                | Required? | Default |
| :--------------------------------- | :-------------------------------------------------------------------------- | :---------: | :-------: |
| EMAIL\_SMTP\_HOST                 | Hostname of email server                                                   | <Icon icon="square-check" iconType="solid"/>         |         |
| EMAIL\_SMTP\_PORT                 | Port of email server                                                       | 587       |         |
| EMAIL\_SMTP\_SECURE               | Secure connection                                                          | true      |         |
| EMAIL\_SMTP\_USER                 | Auth user                                                                  | <Icon icon="square-check" iconType="solid"/>         |         |
| EMAIL\_SMTP\_PASSWORD             | Auth password                                                              | \[1\]     |         |
| EMAIL\_SMTP\_ACCESS\_TOKEN        | Auth access token for Oauth2 authentication                                | \[1\]     |         |
| EMAIL\_SMTP\_ALLOW\_INVALID\_CERT | Allow connection to TLS server with self-signed or invalid TLS certificate | false     |         |
| EMAIL\_SMTP\_SENDER\_EMAIL        | The email address that sends emails                                        | <Icon icon="square-check" iconType="solid"/>         |         |
| EMAIL\_SMTP\_SENDER\_NAME         | The name of the email address that sends emails                            | Lightdash |         |

\[1\] `EMAIL_SMTP_PASSWORD` or `EMAIL_SMTP_ACCESS_TOKEN` needs to be provided

## SSO environment variables

These variables enable you to control Single Sign On (SSO) functionality.

| Variable                                  | Description                                                                      | Required? | Default |
| :----------------------------------------- | :-------------------------------------------------------------------------------- | :---------: | :-------: |
| AUTH\_DISABLE\_PASSWORD\_AUTHENTICATION   | If "true" disables signing in with plain passwords                               | false     |         |
| AUTH\_ENABLE\_GROUP\_SYNC                 | If "true" enables assigning SSO groups to Lightdash groups                       | false     |         |
| AUTH\_GOOGLE\_OAUTH2\_CLIENT\_ID          | Required for Google SSO                                                          |           |         |
| AUTH\_GOOGLE\_OAUTH2\_CLIENT\_SECRET      | Required for Google SSO                                                          |           |         |
| AUTH\_OKTA\_OAUTH\_CLIENT\_ID             | Required for Okta SSO                                                            |           |         |
| AUTH\_OKTA\_OAUTH\_CLIENT\_SECRET         | Required for Okta SSO                                                            |           |         |
| AUTH\_OKTA\_OAUTH\_ISSUER                 | Required for Okta SSO                                                            |           |         |
| AUTH\_OKTA\_DOMAIN                        | Required for Okta SSO                                                            |           |         |
| AUTH\_OKTA\_AUTHORIZATION\_SERVER\_ID     | Optional for Okta SSO with a custom authorization server                         |           |         |
| AUTH\_OKTA\_EXTRA\_SCOPES                 | Optional for Okta SSO scopes (e.g. groups) without a custom authorization server |           |         |
| AUTH\_ONE\_LOGIN\_OAUTH\_CLIENT\_ID       | Required for One Login SSO                                                       |           |         |
| AUTH\_ONE\_LOGIN\_OAUTH\_CLIENT\_SECRET   | Required for One Login SSO                                                       |           |         |
| AUTH\_ONE\_LOGIN\_OAUTH\_ISSUER           | Required for One Login SSO                                                       |           |         |
| AUTH\_AZURE\_AD\_OAUTH\_CLIENT\_ID        | Required for Azure AD                                                            |           |         |
| AUTH\_AZURE\_AD\_OAUTH\_CLIENT\_SECRET    | Required for Azure AD                                                            |           |         |
| AUTH\_AZURE\_AD\_OAUTH\_TENANT\_ID        | Required for Azure AD                                                            |           |         |
| AUTH\_AZURE\_AD\_OIDC\_METADATA\_ENDPOINT | Optional for Azure AD                                                            |           |         |
| AUTH\_AZURE\_AD\_X509\_CERT\_PATH         | Optional for Azure AD                                                            |           |         |
| AUTH\_AZURE\_AD\_X509\_CERT               | Optional for Azure AD                                                            |           |         |
| AUTH\_AZURE\_AD\_PRIVATE\_KEY\_PATH       | Optional for Azure AD                                                            |           |         |
| AUTH\_AZURE\_AD\_PRIVATE\_KEY             | Optional for Azure AD                                                            |           |         |

## Logging environment variables

| Variable                        | Description                                                 | Required?              | Default |
| :------------------------------- | :----------------------------------------------------------- | :----------------------: | :-------: |
| LIGHTDASH\_LOG\_LEVEL           | The minimum level of log messages to display                | INFO                   |         |
| LIGHTDASH\_LOG\_FORMAT          | The format of log messages                                  | pretty                 |         |
| LIGHTDASH\_LOG\_OUTPUTS         | The outputs to send log messages to                         | console                |         |
| LIGHTDASH\_LOG\_CONSOLE\_LEVEL  | The minimum level of log messages to display on the console | LIGHTDASH\_LOG\_LEVEL  |         |
| LIGHTDASH\_LOG\_CONSOLE\_FORMAT | The format of log messages on the console                   | LIGHTDASH\_LOG\_FORMAT |         |
| LIGHTDASH\_LOG\_FILE\_LEVEL     | The minimum level of log messages to write to the log file  | LIGHTDASH\_LOG\_LEVEL  |         |
| LIGHTDASH\_LOG\_FILE\_FORMAT    | The format of log messages in the log file                  | LIGHTDASH\_LOG\_FORMAT |         |
| LIGHTDASH\_LOG\_FILE\_PATH      | The path to the log file                                    | ./logs/all.log         |         |

## Prometheus environment variables

| Variable                                      | Description                                                                     | Required?                 | Default |
| :--------------------------------------------- | :------------------------------------------------------------------------------- | :-------------------------: | :-------: |
| LIGHTDASH\_PROMETHEUS\_ENABLED                | Enables/Disables Prometheus metrics endpoint                                    | false                     |         |
| LIGHTDASH\_PROMETHEUS\_PORT                   | Port for Prometheus metrics endpoint                                            | 9090                      |         |
| LIGHTDASH\_PROMETHEUS\_PATH                   | Path for Prometheus metrics endpoint                                            | /metrics                  |         |
| LIGHTDASH\_PROMETHEUS\_PREFIX                 | Prefix for metric names.                                                        |                           |         |
| LIGHTDASH\_GC\_DURATION\_BUCKETS              | Buckets for duration histogram in seconds.                                      | 0.001, 0.01, 0.1, 1, 2, 5 |         |
| LIGHTDASH\_EVENT\_LOOP\_MONITORING\_PRECISION | Precision for event loop monitoring in milliseconds. Must be greater than zero. | 10                        |         |
| LIGHTDASH\_PROMETHEUS\_LABELS                 | Labels to add to all metrics. Must be valid JSON                                |                           |         |

## Security

| Variable                         | Description                                                                                                      | Required? | Default |
| :-------------------------------- | :---------------------------------------------------------------------------------------------------------------- | :---------: | :-------: |
| LIGHTDASH\_CSP\_REPORT\_ONLY     | Enables Content Security Policy (CSP) reporting only mode. This is recommended to be set to false in production. | true      |         |
| LIGHTDASH\_CSP\_ALLOWED\_DOMAINS | List of domains that are allowed to load resources from. Values must be separated by commas.                     |           |         |
| LIGHTDASH\_CSP\_REPORT\_URI      | URI to send CSP violation reports to.                                                                            |           |         |
